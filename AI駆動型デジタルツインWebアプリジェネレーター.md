# AI駆動型デジタルツインWebアプリジェネレーター
## 詳細要件定義書

**プロジェクト名:** Digital Twin App Generator  
**バージョン:** 1.0 (Prototype)  
**作成日:** 2025年12月6日  
**目的:** Webアプリ開発コンペ参加 - AIとの協働開発プロセスの体験と可視化

---

## 1. 概要

### 1.1 プロジェクトの目的
本プロジェクトは、ユーザーが所有する**特定の現実世界のモノ**（以下「対象物」）の「デジタルツイン」を作成し、そのモノに特化したWebアプリケーションを、**AIとの協働を通じて開発・実装する**ことを目的とします。

### 1.2 主要なコンセプト
- **デジタルツイン:** 現実世界の対象物の状態、属性、履歴をデジタル空間で再現したもの。
- **AI協働開発:** ユーザーがAI（ChatGPTなどの大規模言語モデル）と対話しながら、アプリケーションの設計、コード生成、デバッグを進めるプロセス。
- **パーソナライズ:** 各ユーザーが選んだ対象物に特化した、世界に一つだけのWebアプリケーション。

### 1.3 ターゲットユーザー
- **プライマリ:** Webアプリ開発コンペの参加者（学生、初心者プログラマー）
- **セカンダリ:** AIとの協働開発に興味がある開発者

---

## 2. 機能要件

### 2.1 ユーザーが実行する主要なワークフロー

#### Phase 1: 対象物の登録と要件定義
ユーザーは、デジタルツイン化したい対象物について、以下の情報をアプリケーションに入力します。

| 情報項目 | 説明 | 例 |
| :--- | :--- | :--- |
| **対象物の名前** | デジタルツイン化するモノの名前 | 「愛用のコーヒーメーカー」 |
| **カテゴリ** | 対象物の種類 | 家電、楽器、植物、コレクション など |
| **基本属性** | 対象物の重要な特性 | メーカー、購入日、型番、色 など |
| **追跡したいデータ** | ユーザーが記録したい情報 | 使用時間、メンテナンス日、温度設定 など |
| **必要な機能** | アプリが提供すべき機能 | 状態表示、履歴管理、アラート など |

**出力:** ユーザーの入力に基づいて、AIが**データモデル（DBスキーマ）**と**機能リスト**を自動生成します。

#### Phase 2: Webアプリケーションの自動生成
AIが生成したデータモデルと機能リストに基づいて、以下のコンポーネントが自動生成されます。

| コンポーネント | 説明 |
| :--- | :--- |
| **フロントエンド** | React コンポーネント、ページレイアウト、UI要素 |
| **バックエンド** | APIエンドポイント、ルーティング、ビジネスロジック |
| **データベース** | テーブル定義、リレーション、初期データ |
| **3Dビューアー** | 対象物の3Dモデル表示コンポーネント（オプション） |

#### Phase 3: デバッグと調整
ユーザーが生成されたアプリケーションを実行し、バグや要件とのズレを発見した場合、AIに修正を指示します。AIは修正案を提案し、ユーザーはそれを承認または再指示します。

#### Phase 4: 公開と共有
完成したアプリケーションは、ユーザーが他者と共有したり、自分のポートフォリオに含めたりできます。

### 2.2 アプリケーション側の主要機能

#### 2.2.1 ホームページ / ランディングページ
- **説明:** アプリケーションの目的、使用方法、事例を紹介するページ。
- **要素:**
  - プロジェクトの説明文
  - 使用例（「コーヒーメーカーのデジタルツイン」など）
  - 「今すぐ始める」ボタン
  - AI協働開発プロセスの図解

#### 2.2.2 対象物登録フォーム
- **説明:** ユーザーが対象物の情報を入力するフォーム。
- **要素:**
  - テキスト入力フィールド（名前、説明）
  - ドロップダウン（カテゴリ選択）
  - 複数選択チェックボックス（追跡したいデータの種類）
  - 画像アップロード（対象物の写真）
  - 「AI生成を開始」ボタン

#### 2.2.3 AI生成プロセス表示画面
- **説明:** AIがデータモデルと機能リストを生成している過程を表示。
- **要素:**
  - プログレスバー
  - 生成中のメッセージ（「データモデルを生成中...」など）
  - 生成されたコードのプレビュー（オプション）

#### 2.2.4 生成されたアプリケーションの管理画面
ユーザーが生成したアプリケーションを管理・カスタマイズするための画面。

**4.4.1 ダッシュボード**
- 対象物の現在の状態を表示
- 最新の更新情報
- クイックアクション（例：「メンテナンスを記録」）

**4.4.2 データ管理画面**
- 対象物のデータを表示・編集するテーブル
- 新規データの追加フォーム
- データの削除機能

**4.4.3 履歴表示画面**
- 対象物に関連するすべての操作・更新の時系列表示
- フィルタリング機能（日付、操作種別）

**4.4.4 3Dビューアー（オプション）**
- 対象物の3Dモデルを表示
- 回転、ズーム、パンの操作
- 異なる状態の3Dモデルを切り替え表示

#### 2.2.5 ユーザー認証・プロフィール
- **説明:** ユーザーが複数のデジタルツインを管理できるようにするための認証機能。
- **要素:**
  - ログイン / サインアップ
  - プロフィール編集
  - 作成したデジタルツインの一覧表示

#### 2.2.6 共有・エクスポート機能
- **説明:** ユーザーが作成したデジタルツインを他者と共有したり、データをエクスポートしたりする機能。
- **要素:**
  - 共有リンク生成
  - CSV/JSON形式でのデータエクスポート
  - 公開/非公開の切り替え

---

## 3. 非機能要件

### 3.1 パフォーマンス
- ページ読み込み時間: 3秒以内
- API応答時間: 500ms以内
- 同時接続ユーザー数: 100以上（プロトタイプ段階）

### 3.2 セキュリティ
- HTTPS通信の使用
- ユーザー認証によるデータ保護
- SQLインジェクション対策
- CSRF対策

### 3.3 スケーラビリティ
- ユーザー数増加に対応可能なアーキテクチャ
- データベースの効率的な設計

### 3.4 ユーザビリティ
- モバイルレスポンシブデザイン
- 直感的なUI/UX
- アクセシビリティ対応（WCAG 2.1 AA準拠を目指す）

### 3.5 保守性
- コードの可読性と保守性
- API仕様ドキュメント
- テストコードの充実

---

## 4. 技術要件

### 4.1 推奨技術スタック

| レイヤー | 技術 | 理由 |
| :--- | :--- | :--- |
| **フロントエンド** | React + TypeScript | AIによるコード生成が容易で、コンポーネント指向が明確 |
| **スタイリング** | Tailwind CSS | ユーティリティクラスベースでAIが設計を提案しやすい |
| **バックエンド** | Node.js (Express) または Python (FastAPI) | シンプルなAPI構築に適しており、AIサポートが豊富 |
| **データベース** | PostgreSQL / SQLite | 開発の迅速性と拡張性のバランスが良い |
| **ORM** | Drizzle ORM / SQLAlchemy | スキーマ定義がコード中心でAIが対応しやすい |
| **認証** | JWT + OAuth 2.0 | セキュアで標準的な認証方式 |
| **3D表示** | Three.js | WebGLベースで3Dモデル表示が可能 |

### 4.2 AI協働ツール
- **開発環境:** GitHub Copilot、Cursor、またはChatGPT
- **プロンプトテンプレート:** 要件定義から自動生成されたプロンプト
- **コードレビュー:** AIが生成したコードをユーザーが検証

### 4.3 デプロイメント
- **ホスティング:** Vercel (フロントエンド)、Heroku / Railway (バックエンド)
- **CI/CD:** GitHub Actions

---

## 5. データモデル（概要）

### 5.1 主要なエンティティ

#### User (ユーザー)
```
- id (PK)
- email (UNIQUE)
- password_hash
- name
- created_at
- updated_at
```

#### DigitalTwin (デジタルツイン)
```
- id (PK)
- user_id (FK)
- name
- category
- description
- image_url
- is_public
- created_at
- updated_at
```

#### TwinAttribute (対象物の属性)
```
- id (PK)
- twin_id (FK)
- attribute_name
- attribute_value
- data_type (string, number, date, etc.)
- updated_at
```

#### TwinHistory (対象物の操作履歴)
```
- id (PK)
- twin_id (FK)
- action_type (created, updated, deleted, etc.)
- action_details (JSON)
- created_at
```

#### GeneratedApp (生成されたアプリケーション)
```
- id (PK)
- twin_id (FK)
- app_code (TEXT) - 生成されたコード
- schema (JSON) - データモデル定義
- features (JSON) - 機能リスト
- status (draft, generated, deployed)
- created_at
- updated_at
```

---

## 6. UI/UXデザイン方針

### 6.1 デザイン原則
- **シンプルさ:** 複雑な機能を直感的に操作できるUI
- **視覚的フィードバック:** ユーザーの操作に対する即座の反応
- **段階的な開示:** 初心者向けに必要な情報を段階的に表示
- **AI協働の可視化:** AIが何をしているかをユーザーに明確に伝える

### 6.2 カラースキーム
- **プライマリカラー:** 青系（信頼性、テクノロジー感）
- **アクセントカラー:** 紫系（AI、革新性）
- **背景:** 白 / ライトグレー

### 6.3 タイポグラフィ
- **見出し:** 大きく、太字
- **本文:** 読みやすいサンズセリフフォント

---

## 7. 開発フェーズ

### Phase 1: MVP (Minimum Viable Product) - 2週間
- ホームページ
- 対象物登録フォーム
- AI生成プロセス表示画面
- 基本的なダッシュボード

### Phase 2: コア機能 - 2週間
- ユーザー認証
- データ管理画面
- 履歴表示機能
- API完成

### Phase 3: 拡張機能 - 1週間
- 3Dビューアー（オプション）
- 共有・エクスポート機能
- テスト充実

### Phase 4: ポーランド・デプロイ - 1週間
- UI/UXの最適化
- パフォーマンス改善
- 本番環境へのデプロイ

---

## 8. 成功基準

| 基準 | 目標値 |
| :--- | :--- |
| **AI協働の体験度** | ユーザーが少なくとも3つ以上のAIとの対話ポイント（プロンプト作成、コード修正、デバッグ）を経験 |
| **アプリケーションの完成度** | MVPの全機能が動作し、基本的なユースケースが実行可能 |
| **コード品質** | テストカバレッジ60%以上、主要な機能にユニットテスト存在 |
| **ユーザビリティ** | 初心者ユーザーが指示なしで基本操作を完了できる |
| **ドキュメント** | API仕様書、README、開発プロセスドキュメントが完備 |

---

## 9. リスクと対策

| リスク | 影響度 | 対策 |
| :--- | :--- | :--- |
| **AI生成コードの品質** | 高 | 生成後のコードレビュー、テスト充実 |
| **スコープクリープ** | 中 | MVPに機能を限定、段階的な拡張 |
| **3Dモデル生成の複雑性** | 中 | 初期段階では3Dビューアーをオプション化 |
| **ユーザー認証の実装** | 低 | 標準的なJWT + OAuth 2.0を採用 |

---

## 10. 今後の拡張可能性

- **リアルタイム通知:** 対象物の状態変化をユーザーに通知
- **IoT連携:** 実際のセンサーデータをデジタルツインに反映
- **マルチユーザーコラボレーション:** 複数ユーザーで同一のデジタルツインを管理
- **AI推奨機能:** AIが対象物のメンテナンスやケアを提案
- **マーケットプレイス:** ユーザーが作成したデジタルツインアプリを共有・販売

---

## 11. 参考資料

- **デジタルツイン概念:** 製造業やスマートシティで活用されている技術
- **AI協働開発:** GitHub Copilot、Cursor などのツールが提供する機能
- **Web開発ベストプラクティス:** React、Express、PostgreSQL の公式ドキュメント
